---
export const prerender = false;

// Clear cookies server-side
Astro.cookies.delete('sb-access-token', { path: '/' });
Astro.cookies.delete('sb-refresh-token', { path: '/' });

// Redirect to home
---

<script is:inline>
  // Clear localStorage client-side
  localStorage.removeItem('fashionstore-user');
  
  // Clear any supabase related items
  const keysToRemove = Object.keys(localStorage).filter(
    key => key.startsWith('sb-') || key.includes('supabase') || key.includes('auth')
  );
  keysToRemove.forEach(key => localStorage.removeItem(key));
  
  // Clear cookies manually as fallback
  document.cookie = 'sb-access-token=; Max-Age=0; path=/;';
  document.cookie = 'sb-refresh-token=; Max-Age=0; path=/;';

  // Final redirect
  window.location.href = '/';
</script>

<div class="min-h-screen flex items-center justify-center bg-gray-50">
  <div class="text-center">
    <p class="text-gray-500 mb-4">Cerrando sesi√≥n...</p>
    <div class="inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-black"></div>
  </div>
</div>
